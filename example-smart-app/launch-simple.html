<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Example-SMART-App</title>

    <script type="text/javascript">
      function insertText() {
          document.getElementById('launched_from').innerHTML = document.referrer;
          document.getElementById('launch_url').innerHTML = window.location.href;
      }
  
      function doAuthorize() {
        clientId = document.getElementById('client_id').innerHTML;
        scope = document.getElementById('scope').innerHTML;

        alert("doAuthorize()" + clientId + ", " + scope);
//      FHIR.oauth2.authorize({
//        'client_id': form["client_id"],
//        'scope':  form["scope"]
//      });
      }
    </script>
    
    <style>
      table, th, td {
        border: 1px solid black;
      }
      th, td {
        padding: 5px;
      }
    </style>
  </head>

  <body onload="insertText();">
    <!-- FHIR Client JS Library -->
    <script src='./lib/js/fhir-client-v0.1.12.js'></script>

    <form onsubmit="return doAuthorize();">
      <table border="1" cellpadding="1">
        <tr>
          <td>Launched from</td>
          <td id="launched_from"></td>
        </tr>
        <tr>
          <td>Launched URL</td>
          <td id="launch_url"></td>
        </tr>
        <tr>
          <td>Client Id</td>
          <td><input type="text" id="client_id" name="client_id" size="100" value="a135b6b9-3940-4b9e-a750-3777be26d10a"/></td>
        </tr>
        <tr>
          <td>Scope</td>
          <td><input type="text" id="scope" name="scope" size="100" value="launch openid profile fhirUser"/></td>
        </tr>
      </table>
      <br/><br/>
      <input type="submit" value="Proceed with Authorize"/>
    </form>
    
    <div class="spinner">
      <div class="bounce1"></div>
      <div class="bounce2"></div>
      <div class="bounce3"></div>
    </div>
  </body>
</html>
